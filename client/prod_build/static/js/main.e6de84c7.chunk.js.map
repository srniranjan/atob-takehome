{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","SignIn","onClick","provider","GoogleAuthProvider","signInWithPopup","TruckLocation","props","truckStyle","position","width","height","left","top","border","backgroundColor","textAlign","color","fontSize","fontWeight","padding","style","text","MapComponent","center","lat","lng","zoom","locationsRef","collection","useCollectionData","locations","console","log","bootstrapURLKeys","key","defaultCenter","defaultZoom","map","loc","location","name","id","length","truckLines","filter","start","latitude","longitude","end","haversine","unit","lines","join","fileDownload","App","useAuthState","user","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6SAYAA,IAASC,cAAc,CACrBC,OAAQ,0CACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eACnBC,MAAO,8CAGT,IAAMC,EAAOR,IAASQ,OAChBC,EAAYT,IAASS,YAE3B,SAASC,IAMP,OACE,wBAAQC,QANe,WACvB,IAAMC,EAAW,IAAIZ,IAASQ,KAAKK,mBACnCL,EAAKM,gBAAgBF,IAIrB,iCAIJ,SAASG,EAAcC,GAErB,IAEMC,EAAa,CACjBC,SAAU,WACVC,MAJY,GAKZC,OAJa,GAKbC,MAAM,GACNC,KAAK,GAELC,OAAQ,sBACRC,gBAAiB,QACjBC,UAAW,SACXC,MAAO,UACPC,SAAU,EACVC,WAAY,OACZC,QAAS,GAEX,OAAQ,qBAAKC,MAAOb,EAAZ,SAAyBD,EAAMe,OAGzC,SAASC,IACP,IAAMhB,EAAQ,CACZiB,OAAQ,CAACC,IAAK,WAAYC,KAAM,aAChCC,KAAM,IAGFC,EAAe5B,EAAU6B,WAAW,mBANpB,EAOFC,YAAkBF,GAA/BG,EAPe,oBAQtBC,QAAQC,IAAIF,GAsBZ,OACE,sBAAKV,MAAO,CAAEV,OAAQ,OAAQD,MAAO,QAArC,UACE,cAAC,IAAD,CACEwB,iBAAkB,CAAEC,IAAK,2CACzBC,cAAe7B,EAAMiB,OACrBa,YAAa9B,EAAMoB,KAHrB,SAIKI,GAAaA,EAAUO,KAAI,SAAAC,GAC1B,OAAO,cAACjC,EAAD,CAA4BmB,IAAKc,EAAIC,SAAS,GAAId,IAAKa,EAAIC,SAAS,GAAIlB,KAAMiB,EAAIE,MAA9DF,EAAIG,SAGnC,wBAAQxC,QA9BM,WAClB,GAAI6B,GAAaA,EAAUY,OAAS,EAAG,CACrC,IAWMC,EAXeb,EAAUc,QAAO,SAAAN,GACpC,IAAMO,EAAQ,CACZC,SAAUxC,EAAMiB,OAAOC,IACvBuB,UAAWzC,EAAMiB,OAAOE,KAEpBuB,EAAM,CACVF,SAAUR,EAAIC,SAAS,GACvBQ,UAAWT,EAAIC,SAAS,IAE1B,OAAQU,IAAUJ,EAAOG,EAAK,CAACE,KAAM,WAAa,OAEpBb,KAAI,SAAAC,GAAG,MAAI,CAAC,IAAD,OAAKA,EAAIG,GAAT,gBAAoBH,EAAIE,KAAxB,gBAAqCF,EAAIC,SAAS,GAAlD,gBAA6DD,EAAIC,SAAS,GAA1E,SAErCY,EAAQ,CADK,CAAC,gCACN,mBAAgBR,IAAYS,KAAK,QAC/CC,IAAaF,EAAO,uBAclB,8CAeOG,MAVf,WAAgB,IAAD,EACEC,YAAazD,GAArB0D,EADM,oBAGb,OACE,qBAAKC,UAAU,MAAf,SACGD,EAAO,cAAClC,EAAD,IAAmB,cAACtB,EAAD,OC/FlB0D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.e6de84c7.chunk.js","sourcesContent":["import React from 'react'\nimport './App.css';\nimport GoogleMapReact from 'google-map-react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport fileDownload from 'js-file-download';\nimport haversine from 'haversine';\n\nimport {useAuthState} from 'react-firebase-hooks/auth';\nimport {useCollectionData} from 'react-firebase-hooks/firestore';\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyD4F5OZb1NTtkY422pe58CpQFd5wlgIFZU\",\n  authDomain: \"atob-takehome.firebaseapp.com\",\n  projectId: \"atob-takehome\",\n  storageBucket: \"atob-takehome.appspot.com\",\n  messagingSenderId: \"117907608442\",\n  appId: \"1:117907608442:web:06630c7df7f1af5725bcc3\"\n});\n\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider);\n  }\n  \n  return (\n    <button onClick={signInWithGoogle}>Sign in with Google</button>\n  )\n}\n\nfunction TruckLocation(props) {\n  // console.log(props)\n  const width = 20;\n  const height = 20;\n  const truckStyle = {\n    position: 'absolute',\n    width,\n    height,\n    left: -width / 2,\n    top: -height / 2,\n\n    border: '2.5px solid #f44336',\n    backgroundColor: 'white',\n    textAlign: 'center',\n    color: '#3f51b5',\n    fontSize: 8,\n    fontWeight: 'bold',\n    padding: 4\n  }\n  return (<div style={truckStyle}>{props.text}</div>);\n}\n\nfunction MapComponent() {\n  const props = {\n    center: {lat: 38.0006322, lng: -121.2894793}, \n    zoom: 10\n  }\n\n  const locationsRef = firestore.collection('truck_locations');\n  const [locations] = useCollectionData(locationsRef);\n  console.log(locations)\n\n  const generateCSV = () => {\n    if (locations && locations.length > 0) {\n      const nearbyTrucks = locations.filter(loc => {\n        const start = {\n          latitude: props.center.lat,\n          longitude: props.center.lng\n        }\n        const end = {\n          latitude: loc.location[0],\n          longitude: loc.location[1]\n        }\n        return (haversine(start, end, {unit: 'meter'}) <= 200 * 1000)\n      })\n      const truckLines = nearbyTrucks.map(loc => [`\"${loc.id}\"`, `\"${loc.name}\"`, `\"${loc.location[0]}\"`, `\"${loc.location[1]}\"`])\n      const headerLine = ['ID,Name,Lattitude,Longitude']\n      const lines = [headerLine, ...truckLines].join('\\r\\n')\n      fileDownload(lines, 'nearby_trucks.csv')\n    }\n  }\n  \n  return (\n    <div style={{ height: '95vh', width: '100%' }}>\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: 'AIzaSyDYSiy0JBx9SqSsahYAe3wDecvX2JYaOyo' }}\n        defaultCenter={props.center}\n        defaultZoom={props.zoom} >\n          {locations && locations.map(loc => {\n            return <TruckLocation key={loc.id} lat={loc.location[0]} lng={loc.location[1]} text={loc.name} />\n          })}\n        </GoogleMapReact>\n        <button onClick={generateCSV}>Download CSV of nearby trucks</button>\n    </div>\n    )\n}\n\nfunction App() {\n  const [user] = useAuthState(auth);\n\n  return (\n    <div className=\"App\">\n      {user ? <MapComponent /> : <SignIn />}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}